env:
  global:
  - TZ=Europe/Helsinki
  - GH_REPO="github.com/alypo/alypo.github.io.git"
  - secure: "WvTIzHUp37kyhV9hlQo+BQHh4LNJmp7a447ZUlPK4LkpLDshyZfJ6OPz2Vj8S/MQ/ONA8/VI0IVX7wWbUOsm28EFszJxPojsUdTGb7UtDV/B5x3C0WdWJXLnWhsUvF08QlY25/RtjDFUajTcufwnwEFE/z3yZGgKxr6YU7Xj2Dt6cBtKfkrhhOhOzhXWtsvyun7vXtw6RczORlh7jC78SOdh3U4kzO4CXoA8BVllstI7QQbVJ86RjiUBHa+c0a18jXdmSe3FZBrrPOqzHmogOMl4pJ2/NAq7CvSmOmrrIuKO5wUMdITNA3qGGtJFoAsq5H8T2SQ1JXuk9LevOkhTs6xENi+i/4jVY9M1S5yUmyg7J9h6MwBdFIuQzl0fyxWIEunULqLPiu+tVSb8IstsrsG8nhjNrPT8Fn45Z99zmsNjF7dWmbaPJbdshhf2UbK1dEQ717ke5cl+bpvrYxqnb1WLm7NjxqF3yoqeHfrzPLFp/hroFICH/lY0tKCrLuOnxZn4eG+uOCbSOP5GEgIfVhd3N867E21GFDYh+LaYkSW5CKL89hNJBRQMWF9TKPNcxsndH22v0DaBWOpD1nKyzskmGxgc+zdmmo6vv2r3UaglvrHuz7URE9W6ZpjT43IGgdozUgPkAG2ChLU3bOiKTikt8bWhsGzqbY7AwIJkgDg="

language: node_js
node_js: node
branches:
  only:
  - master
before_install:
install: 
 - npm install hexo-generator-searchdb --save
 - npm install hexo-symbols-count-time --save
 - npm install hexo-generator-feed --save
 - npm install hexo-wordcount --save
 - npm install hexo-related-popular-posts --save
before_script: 
 - cd themes/next
 - git clone https://github.com/theme-next/theme-next-fancybox source/lib/fancybox
 - git clone https://github.com/theme-next/theme-next-fastclick source/lib/fastclick
 - git clone https://github.com/theme-next/theme-next-needmoreshare2 source/lib/needsharebutton
 - git clone https://github.com/theme-next/theme-next-pace source/lib/pace
 - git clone https://github.com/theme-next/theme-next-bookmark.git source/lib/bookmark 
 - cd ..
 - cd .. 
script:
 - hexo -version
 - hexo clean && hexo g
after_script:
 - cd ./public
 - git config user.name "alypo"  
 - git config user.email "reppolexi@gmail.com" 
 - git init
 - git add .
 - git commit -m "Site updated:`date +"%Y-%m-%d %H:%M:%S"`"
 - git push -u "https://${ght}@${GH_REPO}" master -f 
